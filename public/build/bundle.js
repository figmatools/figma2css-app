var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function o(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}let m;function b(t){m=t}function w(t){(function(){if(!m)throw new Error("Function called outside component initialization");return m})().$$.on_mount.push(t)}const v=[],y=[],k=[],x=[],C=Promise.resolve();let _=!1;function P(t){k.push(t)}function j(t){x.push(t)}let D=!1;const E=new Set;function O(){if(!D){D=!0;do{for(let t=0;t<v.length;t+=1){const e=v[t];b(e),T(e.$$)}for(v.length=0;y.length;)y.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];E.has(e)||(E.add(e),e())}k.length=0}while(v.length);for(;x.length;)x.pop()();_=!1,D=!1,E.clear()}}function T(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const I=new Set;let A;function F(){A={r:0,c:[],p:A}}function S(){A.r||r(A.c),A=A.p}function N(t,e){t&&t.i&&(I.delete(t),t.i(e))}function L(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),A.c.push(()=>{I.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function W(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function B(t){t&&t.c()}function M(t,n,c){const{fragment:a,on_mount:o,on_destroy:i,after_update:s}=t.$$;a&&a.m(n,c),P(()=>{const n=o.map(e).filter(l);i?i.push(...n):r(n),t.$$.on_mount=[]}),s.forEach(P)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(v.push(t),_||(_=!0,C.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,l,c,a,o,s,u=[-1]){const f=m;b(e);const d=l.props||{},h=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:u};let p=!1;if(h.ctx=c?c(e,d,(t,n,...r)=>{const l=r.length?r[0]:n;return h.ctx&&o(h.ctx[t],h.ctx[t]=l)&&(h.bound[t]&&h.bound[t](l),p&&z(e,t)),n}):[],h.update(),p=!0,r(h.before_update),h.fragment=!!a&&a(h.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);h.fragment&&h.fragment.l(t),t.forEach(i)}else h.fragment&&h.fragment.c();l.intro&&N(e.$$.fragment),M(e,l.target,l.anchor),O()}b(f)}class H{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}var J="http://localhost:4200";function R(t,e,n){const r=t.slice();return r[5]=e[n],r}function Z(t){let e;return{c(){e=f("↓")},m(t,n){o(t,e,n)},d(t){t&&i(e)}}}function K(t){let e;return{c(){e=f("↑")},m(t,n){o(t,e,n)},d(t){t&&i(e)}}}function Q(t){let e,n,r,l=t[0].children,c=[];for(let e=0;e<l.length;e+=1)c[e]=U(R(t,l,e));const a=t=>L(c[t],1,1,()=>{c[t]=null});return{c(){e=u("ul");for(let t=0;t<c.length;t+=1)c[t].c();p(e,"class",n="list pa0 pl3 "+(t[0].isOpen?"db":"dn"))},m(t,n){o(t,e,n);for(let t=0;t<c.length;t+=1)c[t].m(e,null);r=!0},p(t,o){if(1&o){let n;for(l=t[0].children,n=0;n<l.length;n+=1){const r=R(t,l,n);c[n]?(c[n].p(r,o),N(c[n],1)):(c[n]=U(r),c[n].c(),N(c[n],1),c[n].m(e,null))}for(F(),n=l.length;n<c.length;n+=1)a(n);S()}(!r||1&o&&n!==(n="list pa0 pl3 "+(t[0].isOpen?"db":"dn")))&&p(e,"class",n)},i(t){if(!r){for(let t=0;t<l.length;t+=1)N(c[t]);r=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)L(c[t]);r=!1},d(t){t&&i(e),s(c,t)}}}function U(t){let e;const n=new Y({props:{data:t[5],isParentChecked:t[0].isChecked}});return{c(){B(n.$$.fragment)},m(t,r){M(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.data=t[5]),1&e&&(r.isParentChecked=t[0].isChecked),n.$set(r)},i(t){e||(N(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){q(n,t)}}}function V(t){let e,n,l,c,s,$,m,b,w,v,y,k,x,C=t[0].name+"";function _(t,e){return t[0].isOpen?K:Z}let P=_(t),j=P(t),D=t[0].children&&Q(t);return{c(){e=u("li"),n=u("span"),j.c(),c=d(),s=u("span"),$=u("input"),m=d(),b=u("span"),w=f(C),v=d(),D&&D.c(),p(n,"class",l="pointer "+(t[0].children?"o-100":"o-0")),p($,"type","checkbox"),p(b,"class","w4 dib truncate"),p(e,"class","list w7")},m(r,l){o(r,e,l),a(e,n),j.m(n,null),a(e,c),a(e,s),a(s,$),$.checked=t[0].isChecked,a(e,m),a(e,b),a(b,w),a(e,v),D&&D.m(e,null),y=!0,k||(x=[h(n,"click",t[1]),h($,"change",t[4])],k=!0)},p(t,[r]){P!==(P=_(t))&&(j.d(1),j=P(t),j&&(j.c(),j.m(n,null))),(!y||1&r&&l!==(l="pointer "+(t[0].children?"o-100":"o-0")))&&p(n,"class",l),1&r&&($.checked=t[0].isChecked),(!y||1&r)&&C!==(C=t[0].name+"")&&g(w,C),t[0].children?D?(D.p(t,r),1&r&&N(D,1)):(D=Q(t),D.c(),N(D,1),D.m(e,null)):D&&(F(),L(D,1,1,()=>{D=null}),S())},i(t){y||(N(D),y=!0)},o(t){L(D),y=!1},d(t){t&&i(e),j.d(),D&&D.d(),k=!1,r(x)}}}function X(t,e,n){let{data:r}=e,{isParentChecked:l}=e;const c=t=>n(0,r.isChecked=t,r);return t.$set=t=>{"data"in t&&n(0,r=t.data),"isParentChecked"in t&&n(2,l=t.isParentChecked)},t.$$.update=()=>{4&t.$$.dirty&&c(l)},[r,()=>n(0,r.isOpen=!r.isOpen,r),l,c,function(){r.isChecked=this.checked,n(0,r)}]}class Y extends H{constructor(t){super(),G(this,t,X,V,c,{data:0,isParentChecked:2})}}function tt(t,e,n){const r=t.slice();return r[3]=e[n],r}function et(t){let e;const n=new Y({props:{data:t[3],isParentChecked:t[3].isChecked}});return{c(){B(n.$$.fragment)},m(t,r){M(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.data=t[3]),1&e&&(r.isParentChecked=t[3].isChecked),n.$set(r)},i(t){e||(N(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){q(n,t)}}}function nt(t){let e,n,r=t[0],l=[];for(let e=0;e<r.length;e+=1)l[e]=et(tt(t,r,e));const c=t=>L(l[t],1,1,()=>{l[t]=null});return{c(){e=u("ul");for(let t=0;t<l.length;t+=1)l[t].c();p(e,"class","list pa0 pl3")},m(t,r){o(t,e,r);for(let t=0;t<l.length;t+=1)l[t].m(e,null);n=!0},p(t,[n]){if(1&n){let a;for(r=t[0],a=0;a<r.length;a+=1){const c=tt(t,r,a);l[a]?(l[a].p(c,n),N(l[a],1)):(l[a]=et(c),l[a].c(),N(l[a],1),l[a].m(e,null))}for(F(),a=r.length;a<l.length;a+=1)c(a);S()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)N(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)L(l[t]);n=!1},d(t){t&&i(e),s(l,t)}}}function rt(t,e,n){let{treeData:r=""}=e,l=[];return t.$set=t=>{"treeData"in t&&n(1,r=t.treeData)},t.$$.update=()=>{2&t.$$.dirty&&(t=>{if(!t)return;let e=t=>(t.isOpen=!0,t.isChecked=!1,t.children&&(t.children=t.children.map(t=>e(t))),t);n(0,l=t.document.children.map(t=>e(t)))})(r)},[l,r]}class lt extends H{constructor(t){super(),G(this,t,rt,nt,c,{treeData:1})}}function ct(e){let n,r,l,c,s,m,b,w;return{c(){n=u("div"),r=u("label"),l=f(e[2]),c=d(),s=u("input"),p(r,"class","mb2"),p(s,"id",e[1]),p(s,"class",m="border-box h2 input-reset ba br2 b--moon-gray pa0 pl2"),p(s,"placeholder",e[3]),s.required=!0,p(n,"class","flex flex-column mr3 f7 w6")},m(t,i){o(t,n,i),a(n,r),a(r,l),a(n,c),a(n,s),$(s,e[0]),b||(w=h(s,"input",e[4]),b=!0)},p(t,[e]){4&e&&g(l,t[2]),2&e&&p(s,"id",t[1]),8&e&&p(s,"placeholder",t[3]),1&e&&s.value!==t[0]&&$(s,t[0])},i:t,o:t,d(t){t&&i(n),b=!1,w()}}}function at(t,e,n){let{id:r}=e,{label:l}=e,{value:c}=e,{placeholder:a}=e;return t.$set=t=>{"id"in t&&n(1,r=t.id),"label"in t&&n(2,l=t.label),"value"in t&&n(0,c=t.value),"placeholder"in t&&n(3,a=t.placeholder)},[c,r,l,a,function(){c=this.value,n(0,c)}]}class ot extends H{constructor(t){super(),G(this,t,at,ct,c,{id:1,label:2,value:0,placeholder:3})}}function it(e){let n;return{c(){n=u("div"),p(n,"id","generator")},m(t,e){o(t,n,e)},p:t,i:t,o:t,d(t){t&&i(n)}}}class st extends H{constructor(t){super(),G(this,t,null,it,c,{})}}function ut(t){let e;return{c(){e=u("div"),e.innerHTML='<img class="w2 h2" src="https://i.ya-webdesign.com/images/loading-png-gif.gif" alt="loading">',p(e,"class","bg-white-50 fixed w-100 h-100 z-999 flex justify-center items-center")},m(t,n){o(t,e,n)},d(t){t&&i(e)}}}function ft(t){let e,n,l,c,s,m,b,w,v,k,x,C,_,P,D,E,O,T,I,A,F,S,z,G,H,J,R,Z,K,Q,U,V,X,Y,tt=t[1]?"Stop Watching!":"Watch",et=t[2]&&ut();function nt(e){t[19].call(null,e)}let rt={id:"figmaToken",label:"Figma Access Token*",placeholder:"Figma Access Token"};void 0!==t[4]&&(rt.value=t[4]);const ct=new ot({props:rt});function at(e){t[20].call(null,e)}y.push(()=>W(ct,"value",nt));let it={id:"fileId",label:"File Id*",placeholder:"File Id*"};void 0!==t[5]&&(it.value=t[5]);const ft=new ot({props:it});function dt(e){t[21].call(null,e)}y.push(()=>W(ft,"value",at));let ht={id:"output-path",label:"Full Output Path",placeholder:"Full Output Path"};void 0!==t[0]&&(ht.value=t[0]);const pt=new ot({props:ht});y.push(()=>W(pt,"value",dt));const gt=new lt({props:{treeData:t[3]}}),$t=new st({});return{c(){e=u("main"),n=u("header"),l=d(),et&&et.c(),c=d(),s=u("div"),m=u("div"),B(ct.$$.fragment),w=d(),B(ft.$$.fragment),k=d(),x=u("button"),x.textContent="Load Data",C=d(),_=u("div"),B(pt.$$.fragment),D=d(),E=u("p"),E.textContent="Name the destination file, select the nodes in the treeview and click generate",O=d(),T=u("button"),T.textContent="Generate CSS",I=d(),A=u("button"),F=f(tt),z=d(),G=u("div"),H=u("div"),B(gt.$$.fragment),J=d(),R=u("div"),Z=u("textarea"),K=d(),B($t.$$.fragment),Q=d(),U=u("footer"),p(m,"class","flex"),p(x,"class","bn bg-green white br2 h2 f7 w5 pointer"),p(s,"class","flex justify-between items-end bb b--light-gray ph4 pv3"),p(E,"class","pa0 ma0 f7"),p(T,"class","bn bg-green white br2 h2 f7 w5 pointer"),p(A,"class",S=(t[1]?"bg-red":"bg-green")+" bn white br2 h2 f7 w5 pointer"),p(_,"class","flex items-center justify-between bb b--light-gray ph4 pv2"),p(H,"class","w7 bg-light-gray overflow-auto"),p(Z,"class","w-100 h-100"),p(R,"class","w-100 h-100 pa3 flex justify-center"),p(G,"class","flex relative h-100 w-100")},m(r,i){o(r,e,i),a(e,n),a(e,l),et&&et.m(e,null),a(e,c),a(e,s),a(s,m),M(ct,m,null),a(m,w),M(ft,m,null),a(s,k),a(s,x),a(e,C),a(e,_),M(pt,_,null),a(_,D),a(_,E),a(_,O),a(_,T),a(_,I),a(_,A),a(A,F),a(e,z),a(e,G),a(G,H),M(gt,H,null),a(G,J),a(G,R),a(R,Z),$(Z,t[6]),a(e,K),M($t,e,null),a(e,Q),a(e,U),V=!0,X||(Y=[h(x,"click",t[7]),h(T,"click",t[9]),h(A,"click",t[8]),h(Z,"input",t[22])],X=!0)},p(t,[n]){t[2]?et||(et=ut(),et.c(),et.m(e,c)):et&&(et.d(1),et=null);const r={};!b&&16&n&&(b=!0,r.value=t[4],j(()=>b=!1)),ct.$set(r);const l={};!v&&32&n&&(v=!0,l.value=t[5],j(()=>v=!1)),ft.$set(l);const a={};!P&&1&n&&(P=!0,a.value=t[0],j(()=>P=!1)),pt.$set(a),(!V||2&n)&&tt!==(tt=t[1]?"Stop Watching!":"Watch")&&g(F,tt),(!V||2&n&&S!==(S=(t[1]?"bg-red":"bg-green")+" bn white br2 h2 f7 w5 pointer"))&&p(A,"class",S);const o={};8&n&&(o.treeData=t[3]),gt.$set(o),64&n&&$(Z,t[6])},i(t){V||(N(ct.$$.fragment,t),N(ft.$$.fragment,t),N(pt.$$.fragment,t),N(gt.$$.fragment,t),N($t.$$.fragment,t),V=!0)},o(t){L(ct.$$.fragment,t),L(ft.$$.fragment,t),L(pt.$$.fragment,t),L(gt.$$.fragment,t),L($t.$$.fragment,t),V=!1},d(t){t&&i(e),et&&et.d(),q(ct),q(ft),q(pt),q(gt),q($t),X=!1,r(Y)}}}function dt(t,e,n){let r,l="",c=!1,a=!1,o="",i="",s="",u="";const f=async()=>{try{return i=await(await fetch(`${J}/data?fileId=${u}&figmaToken=${s}&writeData=true`)).json(),i}catch(t){console.error(t)}},d=t=>{let e=[];return t.isChecked&&e.push(t),t.children&&t.children.forEach(t=>{e=e.concat(d(t))}),e},h=t=>{let e=[];return t.forEach(t=>{e=d(t)}),e};let p=new Date("1900-05-24T02:34:14.475592Z"),g=!1;const $=async()=>{try{let t=await(await fetch(`${J}/data?figmaToken=${s}&fileId=${u}&depth=1&writeData=false`)).json(),e=new Date(t.lastModified);return e>p&&(p=e,!0)}catch(t){return console.error(t),!1}},m=async()=>{if(n(2,a=!0),await $()&&await f(),!i)return;let t=h(o.document.children);if(!t.length)return console.error("No checked items!"),void n(2,a=!1);let e=J+"/css";l&&(e+="?filePath="+l);try{n(6,r=await(await fetch(e,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({ids:t.map(t=>t.id)})})).text())}catch(t){console.error(t)}n(2,a=!1)},b=async()=>{n(2,a=!0);try{let t=await fetch(J+"/cached-credentials");console.log("result: ",t),200===t.status&&(t=await t.json(),n(5,u=t.fileId),n(4,s=t.figmaToken),n(5,u=t.id),n(4,s=t.token))}catch(t){console.error(t)}n(2,a=!1)};return w(async()=>{await b()}),[l,c,a,o,s,u,r,async()=>{u&&s&&(n(2,a=!0),n(3,o=await f()),n(2,a=!1))},async()=>{if(c)return clearInterval(g),void n(1,c=!1);let t=0;n(1,c=!0),g=setInterval(async()=>{t<1?t++:await $()&&await m()},5e3)},m,i,p,g,f,d,t=>!new RegExp(/^(con|prn|aux|nul|com[0-9]|lpt[0-9])$|([<>:"\\/\\\\|?*])|(\\.|\\s)$/gi).test(t),h,$,b,function(t){s=t,n(4,s)},function(t){u=t,n(5,u)},function(t){l=t,n(0,l)},function(){r=this.value,n(6,r)}]}return new class extends H{constructor(t){super(),G(this,t,dt,ft,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
